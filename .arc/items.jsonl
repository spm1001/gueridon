{"id": "gdn-cejaba", "type": "outcome", "title": "Access Claude Code from mobile with full harness", "brief": {"why": "Claude Code is terminal-only. Full experience (MCPs, CLAUDE.md, skills, tools) needs to be accessible from phone/tablet on home network, using MAX subscription instead of API billing.", "what": "1. ClaudeCodeAgent adapter implementing pi-web-ui Agent interface 2. JSONL event mapper (CC events → pi AgentEvents) 3. Node.js bridge server (WebSocket ↔ stdio) 4. Web app shell with pi-web-ui components 5. Directory picker for session launch 6. Tool execution viewer 7. AskUserQuestion mobile rendering", "done": "Can open browser on phone, pick a project directory, chat with Claude Code, see streaming responses and tool executions, tap AskUserQuestion options, and resume sessions after disconnect"}, "status": "open", "order": 1, "created_at": "2026-02-08T10:31:43Z", "created_by": "spm1001"}
{"id": "gdn-sohadi", "type": "action", "title": "Scaffold project and wire up pi-web-ui", "brief": {"why": "Need working build pipeline before writing adapter code. pi-web-ui packages are on npm, need Vite bundler with Tailwind.", "what": "1. npm init with type:module 2. Install pi-web-ui, pi-agent-core, pi-ai, mini-lit, lit 3. Vite config with Tailwind plugin 4. Minimal index.html + main.ts loading AgentInterface 5. Verify components render", "done": "npm run dev serves a page with pi-web-ui chat interface visible (even if non-functional)"}, "status": "done", "parent": "gdn-cejaba", "order": 1, "created_at": "2026-02-08T10:31:56Z", "created_by": "spm1001", "waiting_for": null, "tactical": {"steps": ["npm init with type:module", "Install pi-web-ui, pi-agent-core, pi-ai, mini-lit, lit", "Vite config with Tailwind plugin", "Minimal index.html + main.ts loading AgentInterface", "Verify components render"], "current": 5}, "done_at": "2026-02-08T11:10:17Z"}
{"id": "gdn-cawuge", "type": "action", "title": "Context fuel gauge and compaction visibility", "brief": {"why": "Mobile sessions run long without visibility into context usage. Users need a glanceable indicator (not a command to type) and notification when compaction happens, so they can manage session length.", "what": "1. Track usage from CC result events in adapter (input_tokens / contextWindow = percent) 2. Build context gauge component with color thresholds (>70% yellow, >90% red) 3. Detect compaction (input_tokens drop between turns) and surface as notification 4. Use hybrid estimation from pi-mono: last known usage + chars/4 for trailing messages", "done": "Context percentage visible in mobile UI, updates after each turn, yellow/red thresholds work, compaction events shown as notifications"}, "status": "done", "parent": "gdn-cejaba", "order": 2, "created_at": "2026-02-08T10:31:56Z", "created_by": "spm1001", "waiting_for": null, "done_at": "2026-02-08T17:57:19Z"}
{"id": "gdn-lenuge", "type": "action", "title": "Build ClaudeCodeAgent adapter", "brief": {"why": "The adapter is the core translation layer between CC stream-json events and pi-web-ui's Agent interface. All context about the Agent contract and event mapping is warm in this session.", "what": "1. Subclass Agent from pi-agent-core 2. Override prompt() to send via transport (WebSocket later) 3. Build CC event handler that translates stream-json events to pi AgentEvents and state changes 4. Wire into main.ts replacing stub Agent 5. Verify ChatPanel still renders with adapter", "done": "ClaudeCodeAgent class exists, handles all CC event types from event-mapping.md, ChatPanel renders with it (non-functional until bridge exists)"}, "status": "done", "parent": "gdn-cejaba", "order": 3, "created_at": "2026-02-08T11:22:57Z", "created_by": "spm1001", "waiting_for": null, "tactical": {"steps": ["Subclass Agent from pi-agent-core", "Override prompt() to send via transport (WebSocket later)", "Build CC event handler that translates stream-json events to pi AgentEvents and state changes", "Wire into main.ts replacing stub Agent", "Verify ChatPanel still renders with adapter"], "current": 5}, "done_at": "2026-02-08T11:25:39Z"}
{"id": "gdn-jiwize", "type": "action", "title": "Build bridge server", "brief": {"why": "The bridge server is what makes the adapter functional — it spawns and manages claude -p processes, pipes stdin/stdout as JSONL, and exposes a WebSocket endpoint for the browser.", "what": "1. Node.js WebSocket server (ws package) 2. Process-per-session: spawn claude -p with required flags on WS connect 3. Pipe WS messages to CC stdin as stream-json input format 4. Parse CC stdout JSONL and forward events over WS 5. Session management: idle timeout, kill, --resume on reconnect 6. Handle process lifecycle (exit, crash, restart)", "done": "Bridge server runs, browser can connect via WS, typing in ChatPanel sends to CC and streamed response renders in the UI"}, "status": "done", "parent": "gdn-cejaba", "order": 4, "created_at": "2026-02-08T17:54:50Z", "created_by": "spm1001", "waiting_for": null, "tactical": {"steps": ["Node.js WebSocket server (ws package)", "Process-per-session: spawn claude -p with required flags on WS connect", "Pipe WS messages to CC stdin as stream-json input format", "Parse CC stdout JSONL and forward events over WS", "Session management: idle timeout, kill, --resume on reconnect", "Handle process lifecycle (exit, crash, restart)"], "current": 6}, "done_at": "2026-02-08T18:17:48Z"}
{"id": "gdn-lihibi", "type": "action", "title": "Build WebSocket transport for browser", "brief": {"why": "The adapter has a CCTransport interface but no implementation. The browser needs a WebSocket client that connects to the bridge and satisfies CCTransport.", "what": "1. Implement CCTransport over WebSocket 2. Auto-reconnect with exponential backoff 3. Wire into ClaudeCodeAgent.connectTransport() in main.ts 4. Connection status indicator in UI", "done": "Browser connects to bridge on page load, messages flow both directions, reconnects after disconnect"}, "status": "open", "parent": "gdn-cejaba", "order": 5, "created_at": "2026-02-08T17:55:00Z", "created_by": "spm1001", "waiting_for": null}
{"id": "gdn-togeca", "type": "action", "title": "Context fuel gauge component", "brief": {"why": "Mobile sessions run long without visibility. The adapter already tracks context usage from CC result events — need to surface it as a glanceable UI element.", "what": "1. Thin progress bar component using context % from adapter 2. Color thresholds: green default, yellow >70%, red >90% 3. Compaction detection (input_tokens drop) with notification 4. Position near input area for mobile visibility", "done": "Context bar visible in UI, updates after each turn, color changes at thresholds, compaction notified"}, "status": "open", "parent": "gdn-cejaba", "order": 6, "created_at": "2026-02-08T17:55:10Z", "created_by": "spm1001", "waiting_for": null}
{"id": "gdn-rehona", "type": "action", "title": "Adapter unit tests from verified JSONL", "brief": {"why": "The adapter translates CC stream-json events to pi AgentEvents. We have verified JSONL schemas in docs/empirical-verification.md — feeding them through handleCCEvent() and asserting output catches regressions.", "what": "1. Test framework (vitest) 2. Feed verified JSONL sequences through handleCCEvent 3. Assert resulting pi AgentEvents and state changes 4. Cover: text response, tool use, thinking blocks, error, abort", "done": "Tests pass, cover all event types from empirical-verification.md"}, "status": "open", "parent": "gdn-cejaba", "order": 7, "created_at": "2026-02-08T17:57:48Z", "created_by": "spm1001", "waiting_for": null}
{"id": "gdn-guruno", "type": "action", "title": "AskUserQuestion mobile interception", "brief": {"why": "In -p mode, AskUserQuestion fires as a tool_use event with full question/options structure BEFORE the error result. Bridge should intercept this, render as tappable buttons on mobile, and send the user's answer as the next message.", "what": "1. Bridge detects tool_use with name AskUserQuestion 2. Forward question/options to browser as a special event 3. Render as tappable button UI (not in chat flow) 4. User tap sends answer as next prompt 5. Coach CC via --append-system-prompt that AskUserQuestion errors are expected", "done": "AskUserQuestion renders as tappable buttons on mobile, user's selection flows back as a message"}, "status": "open", "parent": "gdn-cejaba", "order": 8, "created_at": "2026-02-08T17:57:57Z", "created_by": "spm1001", "waiting_for": null}
{"id": "gdn-celuko", "type": "action", "title": "Resolve artifacts tool mismatch", "brief": {"why": "ChatPanel.setAgent() injects an artifacts tool via toolsFactory. CC doesn't know about this tool — it uses Write for artifacts. The artifacts panel will show UI that doesn't map to CC's capabilities.", "what": "1. Investigate: does the artifacts tool cause errors or just unused UI? 2. Options: suppress artifacts tool in setAgent config, OR map CC Write of .html/.svg to pi artifact events 3. Decide and implement", "done": "No misleading artifacts UI, or artifacts tool maps correctly to CC Write-based artifacts"}, "status": "open", "parent": "gdn-cejaba", "order": 9, "created_at": "2026-02-08T17:58:07Z", "created_by": "spm1001", "waiting_for": null}
