# UI Audit — 2026-02-16

Autonomous visual audit using headless Chrome on kube with iPhone 14 Pro emulation (393×852 @1x DPR).
Screenshots in `/tmp/ui-audit-*.jpg`.

## Setup & Ergonomics

**What worked well:**
- Passe + headless Chrome + device emulation = functional inner loop for visual inspection
- ~150ms per screenshot, scripts complete in 2-6s depending on wait times
- Can navigate the app, switch folders, type messages, submit prompts — all without a human
- IIFE-wrapped eval-file scripts avoid `const` re-declaration errors across multiple evals in same page context

**What's awkward:**
- Can't simulate touch events (tap, swipe) — passe uses `el.click()` (JS) not CDP `Input.dispatchTouchEvent`. Swipe-to-delete can't be visually tested.
- Scrolling: `passe scroll` uses `window.scrollTo` which works, but the eval-file dance to scroll to percentages is clunky. A `scroll-to 50%` verb would help.
- The session auto-scrolls to bottom while Claude is streaming, fighting manual scroll positioning. Had to work around this.
- `el.click()` on tool block chevrons is hard to target — CSS selectors for the expand button need discovery via `snapshot` first.

## Findings

### 1. Tables clip on mobile (SIGNIFICANT)

**Screenshot:** ui-audit-23-askuser.jpg, ui-audit-24-askuser-buttons.jpg

Markdown tables rendered by MarkdownBlock overflow the viewport with no horizontal scroll affordance. The third column is cut off ("Can I ite..." / "Yes — CSS..." / "Partial —..."). The user has no way to see the truncated content.

**Impact:** Any Claude response with a 3+ column table loses information on mobile.
**Fix:** Add `overflow-x: auto` to the table container, or restructure wide tables into a different format (list, stacked cards).

### 2. Empty session has no onboarding hint (MINOR)

**Screenshot:** ui-audit-06-new-folder.jpg

Fresh folder "mellow-moss" shows a completely blank canvas with just the input bar. No placeholder text like "Ask Claude anything..." or indication of what this is.

**Impact:** Low — existing users know what to do. New users might be confused.
**Fix:** Optional — add a subtle centered hint or example prompts.

### 3. Cold start has no progress indication (MODERATE)

**Screenshot:** ui-audit-08-sending.jpg, ui-audit-09-waiting.jpg

After first message, the only feedback is a blinking cursor. The ~8s cold start (hook loading, API init) shows no "Starting session..." or "Connecting to Claude..." message. The stop button appears immediately, which is good.

**Impact:** First-time experience feels broken — 8 seconds of just a cursor.
**Fix:** Add a transient "Starting Claude..." hint that appears during cold start and disappears on first content.

### 4. Scroll-to-top button active when nothing above (COSMETIC)

**Screenshot:** ui-audit-07-typed-message.jpg

After typing text in an empty session, the up-arrow (scroll to top) button appears active/dark even though there's nothing above to scroll to.

**Impact:** Very minor — cosmetic inconsistency.
**Fix:** Disable/hide scroll-to-top when scrollTop is 0 or content doesn't overflow.

### 5. AskUserQuestion renders as collapsed tool block (DESIGN QUESTION)

**Screenshot:** ui-audit-24-askuser-buttons.jpg

AskUserQuestion shows as a generic collapsed tool block with orange warning icon — same as any other tool. The actual question and options aren't visible without expanding. On desktop CC, questions display inline.

**Impact:** In the current flow, Claude asks the question in prose before the tool call, so the user sees the question text. The tool block is just the mechanical artifact. Not broken, but the collapsed tool block could confuse users who don't understand the AskUserQuestion error pattern.
**Fix:** Consider rendering AskUserQuestion differently — show the question text inline, or hide the tool block entirely since the prose carries the question.

### 6. Tool blocks render cleanly (POSITIVE)

**Screenshots:** Throughout

Bash, Read, Write, Grep, Glob, Skill, Edit tool blocks all render consistently:
- Chevron (expandable) + status icon (green tick / orange warning / red error) + tool name + truncated content
- Compact — don't waste vertical space
- Good contrast between tool blocks and prose

### 7. Inline code and markdown render well (POSITIVE)

**Screenshots:** ui-audit-21-5000.jpg, ui-audit-22-7000.jpg

- Inline code (`el.click()`, `Input.dispatchMouseEvent`) — grey pill background, monospace, clear
- Bold text — proper weight, stands out
- Bullet lists — clean hierarchy, mixed code and prose works
- Numbered lists — proper indentation
- Long paragraphs — good line height and font size for mobile reading

### 8. Folder picker is solid (POSITIVE)

**Screenshots:** ui-audit-01, ui-audit-02, ui-audit-25

- Dialog renders over blurred session background
- Status dots (green/orange) visible and meaningful
- Time-ago labels ("just now", "45m ago", "12h ago") helpful
- Search bar and "+ New folder" prominent
- Fun names ("mellow-moss") working
- Handoff snippet visible under active folders

### 9. Error banner overlaps input bar (MODERATE)

**Screenshots:** ui-audit-26-error-banner.jpg, ui-audit-27-error-long.jpg

The translucent red error banner ("Could not connect to bridge") positions itself just above the input bar via `fixed` + `bottom: calc(4.5rem + ...)`, but visually overlaps the input placeholder text. With longer messages (e.g. "Claude process exited (signal 15) — next message will restart it") it wraps to two lines and the overlap worsens.

Additional issues:
- The × dismiss button is very small — hard to tap on mobile
- The translucent red (`bg-red-500/10`) is subtle enough to miss. The banner could use slightly more visual weight.
- No Retry button on auto-dismiss errors, which is correct, but the × is the only interactive element and it's tiny.

**Impact:** Connection errors are the most common failure mode on mobile (cellular, Tailscale DERP relay). The banner is the primary feedback mechanism and it's partially occluded.
**Fix:** Add `margin-bottom` or increase `bottom` offset so banner sits clearly above the input. Consider making the × larger (min 44×44px per Apple HIG touch target guidelines). Consider slightly stronger background opacity.

## Priority Summary

| # | Finding | Severity | Effort |
|---|---------|----------|--------|
| 1 | Tables clip on mobile | Significant | Small (CSS) |
| 9 | Error banner overlaps input | Moderate | Small (CSS) |
| 3 | Cold start no progress | Moderate | Small |
| 5 | AskUserQuestion rendering | Design question | Medium |
| 2 | Empty session no hint | Minor | Small |
| 4 | Scroll button active when empty | Cosmetic | Trivial |

## Process Notes

**Total time:** ~15 minutes for 25 screenshots across 6 UI states.
**Screenshots taken:** 25 (folder picker, empty session, cold start sequence, tool blocks, scroll positions, AskUserQuestion).
**What I couldn't test:** Touch gestures (swipe, long-press), keyboard interaction, service worker/push notifications, real network conditions, Safari-specific rendering.
