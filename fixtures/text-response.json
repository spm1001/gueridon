{
  "name": "text-response",
  "description": "Simple text response with token streaming. Event ordering matches empirical-verification.md §4: assistant complete arrives BEFORE content_block_stop.",
  "events": [
    {
      "type": "system",
      "subtype": "init",
      "cwd": "/Users/test/project",
      "session_id": "550e8400-e29b-41d4-a716-446655440000",
      "tools": ["Bash", "Read", "Write", "Edit", "Glob", "Grep"],
      "model": "claude-opus-4-6",
      "permissionMode": "bypassPermissions",
      "claude_code_version": "2.1.37"
    },
    {
      "type": "stream_event",
      "event": {
        "type": "message_start",
        "message": {
          "model": "claude-opus-4-6",
          "id": "msg_01XFDUDYJgAACzvnpTVBBKjE",
          "role": "assistant",
          "content": [],
          "stop_reason": null,
          "usage": { "input_tokens": 3, "cache_creation_input_tokens": 31184, "cache_read_input_tokens": 0, "output_tokens": 1 }
        }
      }
    },
    {
      "type": "stream_event",
      "event": { "type": "content_block_start", "index": 0, "content_block": { "type": "text", "text": "" } }
    },
    {
      "type": "stream_event",
      "event": { "type": "content_block_delta", "index": 0, "delta": { "type": "text_delta", "text": "Hello" } }
    },
    {
      "type": "stream_event",
      "event": { "type": "content_block_delta", "index": 0, "delta": { "type": "text_delta", "text": " there, " } }
    },
    {
      "type": "stream_event",
      "event": { "type": "content_block_delta", "index": 0, "delta": { "type": "text_delta", "text": "nice meeting you!" } }
    },
    {
      "_comment": "User replay arrives mid-stream (--replay-user-messages quirk)",
      "type": "user",
      "message": { "role": "user", "content": "Say hello" },
      "session_id": "550e8400-e29b-41d4-a716-446655440000",
      "parent_tool_use_id": null
    },
    {
      "_comment": "Complete assistant message arrives BEFORE content_block_stop — real CC behavior",
      "type": "assistant",
      "message": {
        "model": "claude-opus-4-6",
        "id": "msg_01XFDUDYJgAACzvnpTVBBKjE",
        "type": "message",
        "role": "assistant",
        "content": [{ "type": "text", "text": "Hello there, nice meeting you!" }],
        "stop_reason": "end_turn",
        "stop_sequence": null,
        "usage": { "input_tokens": 31187, "cache_creation_input_tokens": 0, "cache_read_input_tokens": 0, "output_tokens": 10 }
      },
      "parent_tool_use_id": null,
      "session_id": "550e8400-e29b-41d4-a716-446655440000"
    },
    {
      "type": "stream_event",
      "event": { "type": "content_block_stop", "index": 0 }
    },
    {
      "type": "stream_event",
      "event": { "type": "message_delta", "delta": { "stop_reason": "end_turn" }, "usage": { "output_tokens": 10 } }
    },
    {
      "type": "stream_event",
      "event": { "type": "message_stop" }
    },
    {
      "type": "result",
      "subtype": "success",
      "is_error": false,
      "duration_ms": 8234,
      "duration_api_ms": 5020,
      "num_turns": 1,
      "result": "Hello there, nice meeting you!",
      "session_id": "550e8400-e29b-41d4-a716-446655440000",
      "total_cost_usd": 0.099,
      "usage": { "input_tokens": 31187, "output_tokens": 10, "cache_read_input_tokens": 0, "cache_creation_input_tokens": 0 }
    }
  ]
}
